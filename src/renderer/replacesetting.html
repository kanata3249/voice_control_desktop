<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Replacer Setting</title>
<link rel="stylesheet" href="./assets/css/main.css">
<link rel="stylesheet" href="../../node_modules/electron-tabs/electron-tabs.css">
</head>
<body>

<div class="etabs-tabgroup">
  <div class="etabs-tabs"></div>
  <div class="etabs-buttons"></div>
</div>
<div class="etabs-views" style="display: none"></div>

<br/>

<div>
  <div id='targetType'></div>
  <button id='apply'>Apply</button>
  <button id='close'>Close</button>
</div>

<div id="root"></div>

<script>
  var { ipcRenderer } = require("electron")
  const TabGroup = require("electron-tabs")
  tabGroup = new TabGroup();

  networkSetting = tabGroup.addTab({
      title: "Network",
      src: "./empty.html",
      visible: true,
      closable: false
  });
  replacerSetting = tabGroup.addTab({
    title: "Replacer",
    src: "./empty.html",
    visible: true,
    closable: false,
    active: true
  });
  buttonsSetting = tabGroup.addTab({
    title: "Buttons",
    src: "./empty.html",
    visible: true,
    closable: false
  });
  tabGroup.on("tab-active", (tab, tabGroup) => {
    ipcRenderer.send('tab-active', tab.getTitle())
  });
</script>

<script type="text/javascript" src="../../bundle/renderer.js"></script>
<script type="text/javascript">
  var newReplacerSetting

  function onChange(replacerSetting)
  {
    newReplacerSetting = replacerSetting
  }

  function onTargetTypeChange(targetType)
  {
    ipcRenderer.send('replacer-targettype', targetType)
  }

  function setReplacer(replacerSetting, targetTypes, currentTargetType)
  {
    newReplacerSetting = replacerSetting
    loadComponent('ReplacerSettingRoot', document.getElementById('root'), {replacerSetting: replacerSetting, onChange: onChange, key: currentTargetType})
    loadComponent('TargetTypeSelection', document.getElementById('targetType'), {targetTypes: targetTypes, value: currentTargetType, onChange: onTargetTypeChange})
  }

  function apply() {
    ipcRenderer.send('replacer-apply', newReplacerSetting);
  }

  document.getElementById('apply').onclick = apply;
  document.getElementById('close').onclick = window.close;
</script>
</body>
</html>