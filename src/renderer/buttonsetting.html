<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Button Setting</title>
</head>
<body>

<div class="etabs-tabgroup">
  <div class="etabs-tabs"></div>
  <div class="etabs-buttons"></div>
</div>
<div class="etabs-views" style="display: none"></div>

<br/>

<div>
  <div id='targetType'></div>
  <button id='apply'>Apply</button>
  <button id='close'>Close</button>
</div>

<div id="root"></div>

<script type="text/javascript" src="../../bundle/renderer.js"></script>
<script type="text/javascript">
  var { ipcRenderer } = require("electron")
  const TabGroup = require("electron-tabs")
  tabGroup = new TabGroup();

  networkSetting = tabGroup.addTab({
    title: "Network",
    src: "./empty.html",
    visible: true,
    closable: false
  });
  replacerSetting = tabGroup.addTab({
    title: "Replacer",
    src: "./empty.html",
    visible: true,
    closable: false
  });
  buttonsSetting = tabGroup.addTab({
    title: "Buttons",
    src: "./empty.html",
    visible: true,
    closable: false,
    active: true
  });
  tabGroup.on("tab-active", (tab, tabGroup) => {
    ipcRenderer.send('tab-active', tab.getTitle())
  });
</script>
  
<script type="text/javascript">
  var newButtonSetting

  function onChange(buttonSetting)
  {
    newButtonSetting = buttonSetting
  }

  function onTargetTypeChange(targetType)
  {
    ipcRenderer.send('buttons-targettype', targetType)
  }

  function setButtonSetting(buttonSetting, targetTypes, currentTargetType)
  {
    newButtonSetting = buttonSetting
    loadComponent('ButtonSettingRoot', document.getElementById('root'), {buttonSetting: buttonSetting, onChange: onChange, key: currentTargetType})
    loadComponent('TargetTypeSelection', document.getElementById('targetType'), {targetTypes: targetTypes, value: currentTargetType, onChange: onTargetTypeChange})
  }

  function apply() {
    ipcRenderer.send('buttons-apply', newButtonSetting);
  }

  document.getElementById('apply').onclick = apply;
  document.getElementById('close').onclick = window.close;
</script>
</body>
</html>